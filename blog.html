
      <html>
        <head>
          <title>Joseph Luck - Blog</title>
          <meta name="description" content="Product engineer with a passion for design">
          <meta name="author" content="Joseph Luck">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <link href="https://fonts.googleapis.com/css?family=Mukta" rel="stylesheet">
          <link href="https://fonts.googleapis.com/css?family=Fira+Mono" rel="stylesheet">
          <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/github.min.css">
          <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
          <link rel="stylesheet" href="https://unpkg.com/tachyons@4.9.0/css/tachyons.min.css" />
          <link rel="stylesheet" href="/style.css" />
          <!--[if lt IE 9]>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
          <![endif]-->
          <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.1.1/turbolinks.js"></script>
          <script src="/runtime.js"></script>
        </head>
        <body class="df">
          <nav class="bg-near-white pv4 overflow-auto lh-copy mw5 transition slide-out">
            <div class="pv3 pl3 pr4 w-100">
              <div class="mb1 ml3 overflow-hidden truncate">
                <a href="/" title="Home" target="_self" data-type="link">Home</a>
              </div>
              
    <div class="mb1 ml3">
      
          <div class="mb1 truncate">
            <a href="/blog.html" title="Blog" target="_self" data-type="link">Blog</a>
          </div>
        
      
    </div>
  
    <div class="mb1 ml3">
      
          <div class="mb1 truncate">
            <a href="/recommendations.html" title="Recommendations" target="_self" data-type="link">Recommendations</a>
          </div>
        
      
    </div>
  
    <div class="mb1 ml3">
      
          <div class="mb1 truncate">
            <a href="/resume.html" title="Resume" target="_self" data-type="link">Resume</a>
          </div>
        
      
    </div>
  
            </div>
          </nav>
          <main class="flex-1 h-100 overflow-auto transition">
            <div class="ph5vw ph10vw-ns pv4">
              <div class="df pointer mv3" id="nav-toggle">
                <i class="material-icons mr1 gray">menu</i>
                <span class="gray b">Menu</span>
              </div>
              <h1 id=josephluck class="f1 lh-solid mv3" data-type="heading-1"><a style="color: inherit" href="/blog.html#josephluck">Joseph Luck</a></h1><h5 id=ahrefmailtojosephreubenluckgmailcomhtmltitlejosephreubenluckgmailcomtarget_selfdatatypelinkjosephreubenluckgmailcoma class="normal f6 lh-copy gray" data-type="heading-5"><a style="color: inherit" href="/blog.html#ahrefmailtojosephreubenluckgmailcomhtmltitlejosephreubenluckgmailcomtarget_selfdatatypelinkjosephreubenluckgmailcoma"><a href="/mailto:josephreubenluck@gmail.com.html" title="josephreubenluck@gmail.com" target="_self" data-type="link">josephreubenluck@gmail.com</a></a></h5><div class="mv4 bb b--black-10" data-type="hr"></div><div class="mv3" data-type="list"><div class="lh-copy mv1 df" data-type="list-item"><i class="material-icons light-silver mr1">radio_button_unchecked</i><span class="flex-1"><a href="#typesafegenericreactcomponents" title="Type-safe generic React components" target="_self" data-type="link">Type-safe generic React components</a></span></div><div class="lh-copy mv1 df" data-type="list-item"><i class="material-icons light-silver mr1">radio_button_unchecked</i><span class="flex-1"><a href="#productivity" title="Productivity" target="_self" data-type="link">Productivity</a></span></div></div><div class="mv4 bb b--black-10" data-type="hr"></div><h2 id=typesafegenericreactcomponents class="normal f3 lh-copy mv3" data-type="heading-2"><a style="color: inherit" href="/blog.html#typesafegenericreactcomponents">Type-safe generic React components</a></h2><h4 id=saturday1stdecember2018 class="normal f5 lh-copy mv1 gray" data-type="heading-4"><a style="color: inherit" href="/blog.html#saturday1stdecember2018">Saturday 1st December 2018</a></h5><p class="lh-copy mv3" data-type="paragraph">A colleague of mine showed me a neat little unknown feature of Typescript in combination with React that makes it a delight to achieve type-safe generic React components.</p><h3 id=genericreactcomponents class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#genericreactcomponents">Generic React components</a></h3><p class="lh-copy mv3" data-type="paragraph">Generic React components are components that take in a <a href="https://www.typescriptlang.org/docs/handbook/generics.html" title="generic data shape" target="_blank" data-type="link">generic data shape</a> and expose props that operate upon that data shape. For example, a carousel component that takes in an array of a data and exposes a <a href="https://reactjs.org/docs/render-props.html" title="render-prop" target="_blank" data-type="link">render-prop</a> to render each slide within the carousel:</p><pre class="mono bg-near-white br2 pv1 ph2 lh-copy mv3 f7 overflow-auto" data-type="code" data-lang="undefined">// slider.tsx
import React from 'react'

interface Props {
  slides: any[]
  renderSlide: (slide: any): React.ReactNode
}

export function Slider(props: Props) {
  return (
    <span class="hljs-tag">&lt;<span class="hljs-name">SliderContainer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">LeftArrow</span> /&gt;</span>
      {props.slides.map((slide, i) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">SlideContainer</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>
          {props.renderSlide(slide)}
        <span class="hljs-tag">&lt;/<span class="hljs-name">SlideContainer</span>&gt;</span>
      ))}
      <span class="hljs-tag">&lt;<span class="hljs-name">RightArrow</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">SliderContainer</span>&gt;</span>
  )
}

// app.tsx
interface Cat {
  name: string,
  image: string
}

const cats: Cat[] = [
  { name: 'Cute cat', image: 'cure-cat.png' },
  { name: 'Evil cat', image: 'evil-cat.png }
]

export default () {
  return (
    <span class="hljs-tag">&lt;<span class="hljs-name">Slider</span>
      <span class="hljs-attr">slides</span>=<span class="hljs-string">{cats}</span>
      <span class="hljs-attr">renderSlide</span>=<span class="hljs-string">{cat</span> =&gt;</span> (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{cat.image}</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{cat.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    /&gt;
  )
}</pre><div class="bl bw2 b--light-gray pl2 lh-copy gray i" data-type="blockquote"><p class="lh-copy mv3" data-type="paragraph">Slider implementation details have been left out for brevity</p></div><p class="lh-copy mv3" data-type="paragraph">The example above is perfectly fine however, you&#39;ll notice that the component&#39;s <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">slides</code> and <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">renderSlide</code> props are typed using <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">any</code>. This means that when using the component, there will be no inferred type in the render prop <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">renderSlide</code> even though we know ahead of time what the data shape of <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">slides</code> is. However, we can do better!</p><h3 id=addingtypesafety class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#addingtypesafety">Adding type safety</a></h3><p class="lh-copy mv3" data-type="paragraph">It&#39;s clear that the <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">&lt;Slider /&gt;</code> component is designed to be flexible enough to work with varying data shapes, however it does not provide any mechanism for ensuring that the <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">renderSlide</code> prop is type-safe in combination with it&#39;s <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">slides</code> prop. For those who are well versed with Typescript, you&#39;ll know that <a href="https://www.typescriptlang.org/docs/handbook/generics.html" title="generics" target="_blank" data-type="link">generics</a> are the missing ingredient. For those who don&#39;t know, generics allow us to pass around information about the type of data a function, class, or in this case, component is dealing with.</p><p class="lh-copy mv3" data-type="paragraph">We can change our <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">&lt;Slider /&gt;</code> component to take a generic type argument:</p><pre class="mono bg-near-white br2 pv1 ph2 lh-copy mv3 f7 overflow-auto" data-type="code" data-lang="undefined"><span class="hljs-comment">// slider.tsx</span>
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

interface Props&lt;T&gt; {
  <span class="hljs-attr">slides</span>: T[]
  renderSlide: (slide: T): React.ReactNode
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Slider</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">props: Props&lt;T&gt;</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SliderContainer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">LeftArrow</span> /&gt;</span>
      {props.slides.map((slide, i) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">SlideContainer</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>
          {props.renderSlide(slide)}
        <span class="hljs-tag">&lt;/<span class="hljs-name">SlideContainer</span>&gt;</span>
      ))}
      <span class="hljs-tag">&lt;<span class="hljs-name">RightArrow</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">SliderContainer</span>&gt;</span></span>
  )
}</pre><div class="bl bw2 b--light-gray pl2 lh-copy gray i" data-type="blockquote"><p class="lh-copy mv3" data-type="paragraph">Adding a generic type argument <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">&lt;T&gt;</code> and passing it to the <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">Props</code> interface allows the data shape to be passed around</p></div><p class="lh-copy mv3" data-type="paragraph">Now it&#39;s set up, let&#39;s explore how this can be used in our app.</p><h3 id=anieveapproach class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#anieveapproach">A nieve approach</a></h3><pre class="mono bg-near-white br2 pv1 ph2 lh-copy mv3 f7 overflow-auto" data-type="code" data-lang="undefined"><span class="hljs-comment">// app.tsx</span>
interface <span class="hljs-keyword">Cat</span> {
  name: string,
  image: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">const</span> cats: <span class="hljs-keyword">Cat</span>[] = [
  { name: 'Cute <span class="hljs-keyword">cat</span>', image: 'cute-<span class="hljs-keyword">cat</span>.png' },
  { name: 'Evil <span class="hljs-keyword">cat</span>', image: 'evil-<span class="hljs-keyword">cat</span>.png }
]

<span class="hljs-keyword">const</span> CatSlider = Slider&lt;<span class="hljs-keyword">Cat</span>&gt;

export default () {
  <span class="hljs-keyword">return</span> (
    &lt;CatSlider
      slides={cats}
      renderSlide={<span class="hljs-keyword">cat</span> =&gt; (
        &lt;div&gt;
          &lt;img src={<span class="hljs-keyword">cat</span>.image} /&gt;
          &lt;h2&gt;{<span class="hljs-keyword">cat</span>.name}&lt;/h2&gt;
        &lt;/div&gt;
      )}
    /&gt;
  )
}</pre><p class="lh-copy mv3" data-type="paragraph">By assigning a new constant, <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">const CatSlider = Slider&lt;Cat&gt;</code>, we&#39;ve passed the <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">Cat</code> interface to the <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">T</code> generic, and as a result, <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">renderSlide</code> is correctly typed as a <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">Cat</code> and immediately the application has become more type-safe. However, it feels a little hacky to assign a new constant to achieve this.</p><h3 id=aneatlittletrick class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#aneatlittletrick">A neat little trick</a></h3><p class="lh-copy mv3" data-type="paragraph">It would be much nicer if we didn&#39;t have to use an intermediary constant just to enable type-safety on our <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">CatSlider</code>. Well, a little known feature of Typescript with React allows us to pass generic type arguments directly in to React components:</p><pre class="mono bg-near-white br2 pv1 ph2 lh-copy mv3 f7 overflow-auto" data-type="code" data-lang="undefined"><span class="hljs-comment">// app.tsx</span>
interface <span class="hljs-keyword">Cat</span> {
  name: string,
  image: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">const</span> cats: <span class="hljs-keyword">Cat</span>[] = [
  { name: 'Cute <span class="hljs-keyword">cat</span>', image: 'cure-<span class="hljs-keyword">cat</span>.png' },
  { name: 'Evil <span class="hljs-keyword">cat</span>', image: 'evil-<span class="hljs-keyword">cat</span>.png }
]

export default () {
  <span class="hljs-keyword">return</span> (
    &lt;Slider&lt;<span class="hljs-keyword">Cat</span>&gt;
      slides={cats}
      renderSlide={<span class="hljs-keyword">cat</span> =&gt; (
        &lt;div&gt;
          &lt;img src={<span class="hljs-keyword">cat</span>.image} /&gt;
          &lt;h2&gt;{<span class="hljs-keyword">cat</span>.name}&lt;/h2&gt;
        &lt;/div&gt;
      )}
    /&gt;
  )
}</pre><p class="lh-copy mv3" data-type="paragraph">By passing the generic type argument inside the TSX via <code class="mono bg-near-white dib br2 ph1 f7" data-type="codespan">&lt;Slider&lt;Cat&gt; /&gt;</code> we can omit the intermediary constant. It looks a little weird but works a charm!</p><div class="mv4 bb b--black-10" data-type="hr"></div><h2 id=productivity class="normal f3 lh-copy mv3" data-type="heading-2"><a style="color: inherit" href="/blog.html#productivity">Productivity</a></h2><h5 id=tuesday30thoctober2018 class="normal f6 lh-copy gray" data-type="heading-5"><a style="color: inherit" href="/blog.html#tuesday30thoctober2018">Tuesday 30th October 2018</a></h5><p class="lh-copy mv3" data-type="paragraph">Read about how our small engineering achieves productivity whilst working on multiple products at the same time.</p><h3 id=languageandtooling class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#languageandtooling">Language and tooling</a></h3><p class="lh-copy mv3" data-type="paragraph">We&#39;re using <a href="https://reactjs.org/" title="React" target="_blank" data-type="link">React</a>, <a href="https://nextjs.org/" title="Next.js" target="_blank" data-type="link">Next.js</a> and <a href="https://www.styled-components.com/" title="Styled Components" target="_blank" data-type="link">Styled Components</a> all written in <a href="https://www.typescriptlang.org/" title="Typescript" target="_blank" data-type="link">Typescript</a>.</p><p class="lh-copy mv3" data-type="paragraph">Out of all the tools we&#39;re using, I would say that Typescript brings the biggest productivity boost since it allows engineers to write code iteratively with the ability to safely refactor and improve later. Both React and Styled Components work very well out of the box with Typescript. As a bonus, <a href="https://code.visualstudio.com/" title="Visual Studio Code" target="_blank" data-type="link">Visual Studio Code</a> has fantastic built-in Typescript support.</p><h3 id=projectsetup class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#projectsetup">Project set up</a></h3><p class="lh-copy mv3" data-type="paragraph">Fantastec has several web products built on top of the same technology stack. As a result, we&#39;ve been able to share a fair amount of project boilerplate, configuration, UI components and utilities between projects.</p><p class="lh-copy mv3" data-type="paragraph">To facilitate the sharing of code safely and easily, we&#39;re using <a href="https://yarnpkg.com/lang/en/docs/workspaces/" title="Yarn Workspaces" target="_blank" data-type="link">Yarn Workspaces</a> to manage packages of code between products.</p><h3 id=communicatingwiththebackend class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#communicatingwiththebackend">Communicating with the back-end</a></h3><p class="lh-copy mv3" data-type="paragraph">One of the biggest sources of lost productivity I have seen in engineering teams is due to a poor contract between front-end and back-end engineers when it comes to HTTP communication. The problem is two-fold. First, API <a href="https://stackoverflow.com/questions/1051182/what-is-data-transfer-object" title="data transfer objects" target="_blank" data-type="link">data transfer objects</a> are often agreed on informally (on slack, in the office etc) but are rarely enforced in the code leading to inconsistencies over time or <a href="https://medium.com/web-engineering-vox/the-art-of-defensive-programming-6789a9743ed4" title="defensive programming" target="_blank" data-type="link">defensive programming</a>. Second, front-end engineers are often blocked when they build a new feature, having to wait for the back-end team to finish the APIs that are required to power the feature.</p><p class="lh-copy mv3" data-type="paragraph">At Fantastec, we&#39;ve attempted to tackle both of these issues with one approach: defining data transfer objects in Typescript on the front-end and transpiling them in to C# view models for the back-end to use. From these DTOs the front-end also creates a simple mock-server using a combination of <a href="https://github.com/typicode/json-server" title="JSON server" target="_blank" data-type="link">JSON server</a> and <a href="https://github.com/marak/Faker.js/" title="Faker" target="_blank" data-type="link">Faker</a>. The result is a fully autonomous front-end team that can finish features as if the real API exists.</p><h3 id=workingwithdesigners class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#workingwithdesigners">Working with designers</a></h3><p class="lh-copy mv3" data-type="paragraph">Working with designers is a topic that warrants it&#39;s own series of mini posts, however I wanted to share one particular aspect of the process that Fantastec has iterated upon: &quot;treat everything as a component&quot;. Designs are completed in <a href="https://www.sketchapp.com/" title="Sketch" target="_blank" data-type="link">Sketch</a> and presented via <a href="https://www.invisionapp.com" title="Invision" target="_blank" data-type="link">Invision</a>. Front-end engineers pick up the designs and implement them using React and Styled Components inside a <a href="https://storybook.js.org/" title="Storybook" target="_blank" data-type="link">Storybook</a> in isolation from the main application. Once the components are finished, they are placed inside the application and tweaked with designers during a sign-off process.</p><p class="lh-copy mv3" data-type="paragraph">The key point here is that we&#39;re building our UI components inside Storybook in isolation from the main application. The Storybook is published to a public URL for the purpose of documenting existing components when working on new interfaces.</p><h3 id=effectiveplanning class="normal f4 lh-copy mv2 gray" data-type="heading-3"><a style="color: inherit" href="/blog.html#effectiveplanning">Effective planning</a></h3><p class="lh-copy mv3" data-type="paragraph">As with any productive team, planning is as important as execution and tooling.</p><p class="lh-copy mv3" data-type="paragraph">Since I started Fantastec, the product team has grown four fold and continues to grow at a rapid pace. Consequently, we&#39;ve had to invest time in our process. We&#39;ve settled on two week &quot;focussed&quot; sprints where each sprint has a consistent theme. This helps everyone stay in the same context and encourages collaboration and pair-programming.</p>
            </div>
          </main>
        </body>
      </html>
    